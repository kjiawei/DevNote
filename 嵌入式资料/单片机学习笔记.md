MCU资源分析与及使用
mcu(Microcontroller Unit；MCU) ，又称单片微型计算机(Single Chip Microcomputer )或者单片机)
任何一款mcu，其基本原理和功能都是大同小异，所不同的只是其外围功能模块的配置及数量、指令系统等。对于指令系统，虽然形式上看似千差万别，但实际上只是符号的不同，其所代表的含义、所要完成的功能和寻址方式基本上是类似的。因此，对于任何一款mcu，主要应从如下的几个方面来理解和掌握：
* mcu的特点：要了解一款mcu，首先需要知道就是其ROM空间、RAM空间、IO口数量、定时器数量和定时方式、所提供的外围功能模块（Peripheral Circuit）、中断源、工作电压及功耗等等。
* 了解这些mcu Features后，接下来第一步就是将所选mcu的功能与实际项目开发的要求的功能进行对比，明确那些资源是目前所需要的，那些是本项目所用不到的。对于项目中需要用到的而所选mcu不提供的功能，则需要认真理解mcu的相关资料，以求用间接的方法来实现，例如，所开发的项目需要与PC机COM口进行通讯，而所选的mcu不提供UART口，则可以考虑用外部中断的方式来实现；
* 对于项目开发需要用到的资源，则需要对其Manua*进行认真的理解和阅读，而对于不需要的功能模块则可以忽略或浏览即可。对于mcu学习来讲，应用才是关键，也是最主要的目的。
* 明确了mcu的相关功能后，接下来就可以开始编程了。对于初学者或初次使用此款mcu的设计者来说，可能会遇到很多对mcu的功能描述不明确的地方，对于此类问题，可以通过两种方法来解决，一种是编写特别的验证程序来理解资料所述的功能；另一种则可以暂时忽略，程序设计中则按照自己目前的理解来编写，留到调试时去修改和完善。前一种方法适用于时间较宽松的项目和初学者，而后一种方法则适合于具有一定mcu开发经验的人或项目进度较紧迫的情况；
* 指令系统千万不要特别花时间去理解。指令系统只是一种逻辑描述的符号，只有在编程时根据自己的逻辑和程序的逻辑要求来查看相关的指令即可，而且随着编程的进行，对指令系统也会越来越熟练，甚至可以不自觉地记忆下来；
mcu的基本功能：
对于绝大多数mcu，下列功能是最普遍也是最基本的，针对不同的mcu，其描述的方式可能会有区别，但本质上是基本相同的：
* Timer（定时器）：Timer的种类虽然比较多，但可归纳为两大类：一类是固定时间间隔的Timer，即其定时的时间是由系统设定的，用户程序不可控制，系统只提供几种固定的时间间隔给用户程序进行选择，如32Hz，16Hz，8Hz等，此类Timer在4位mcu中比较常见，因此可以用来实现时钟、计时等相关的功能；另一类则是Programmable Timer（可编程定时器），顾名思义，该类Timer的定时时间是可以由用户的程序来控制的，控制的方式包括：时钟源的选择、分频数（Prescale）选择及预制数的设定等，有的mcu三者都同时具备，而有的则可能是其中的一种或两种。此类Timer应用非常灵活，实际的使用也千变万化，其中最常见的一种应用就是用其实现PWM输出（具体的应用，后续会有特别的介绍）。由于时钟源可以自由选择，因此，此类Timer一般均与Event Counter（事件计数器）合在一起；
* IO口：任何mcu都具有一定数量的IO口，没有IO口，mcu就失去了与外部沟通的渠道。根据IO口的可配置情况，可以分为如下几种类型：
** 纯输入或纯输出口：此类IO口有mcu硬件设计决定，只能是输入或输出，不可用软件来进行实时的设定；
** 直接读写IO口：如MCS-51的IO口就属于此类IO口。当执行读IO口指令时，就是输入口；当执行写IO口指令则自动为输出口；
** 程序编程设定输入输出方向的：此类IO口的输入或输出由程序根据实际的需要来进行设定，应用比较灵活，可以实现一些总线级的应用，如I2C总线，各种LCD、LED Driver的控制总线等；
** 对于IO口的使用，重要的一点必须牢记的是：对于输入口，必须有明确的电平信号，确保不能浮空（可以通过增加上拉或下拉电阻来实现）；而对于输出口，其输出的状态电平必须考虑其外部的连接情况，应保证在Standby或静态状态下不存在拉电流或灌电流。
* 外部中断：外部中断也是绝大多数mcu所具有的基本功能，一般用于信号的实时触发，数据采样和状态的检测，中断的方式由上升沿、下降沿触发和电平触发几种。外部中断一般通过输入口来实现，若为IO口，则只有设为输入时其中断功能才会开启；若为输出口，则外部中断功能将自动关闭（ATMEL的ATiny系列存在一些例外，输出口时也能触发中断功能）。外部中断的应用如下：
** 外部触发信号的检测：一种是基于实时性的要求，比如可控硅的控制，突发性信号的检测等；而另一种情况则是省电的需要；
** 信号频率的测量；为了保证信号不被遗漏，外部中断是最理想的选择；
** 数据的解码：在遥控应用领域，为了降低设计的成本，经常需要采用软件的方式来对各种编码数据进行解码，如Manchester和PWM编码的解码；
** 按键的检测和系统的唤醒：对于进入Sleep状态的mcu，一般需要通过外部中断来进行唤醒，最基本的形式则是按键，通过按键的动作来产生电平的变化；
* 通讯接口：mcu所提供的通讯接口一般包括SPI接口，UART，I2C接口等，其分别描述如下：
** SPI接口：此类接口是绝大多数mcu都提供的一种最基本通讯方式，其数据传输采用同步时钟来控制，信号包括：SDI（串行数据输入）、SDO（串行数据输出）、SCLK（串行时钟）及Ready信号；有些情况下则可能没有Ready信号；此类接口可以工作在Master方式或Slave方式下，通俗说法就是看谁提供时钟信号，提供时钟的一方为Master，相反的一方则为Slaver；
** UART（Universal Asynchronous Receive Transmit）：属于最基本的一种异步传输接口，其信号线只有Rx和Tx两条，基本的数据格式为：Start Bit + Data Bit(7-bits/8-bits) + Parity Bit(Even, Odd or None) + Stop Bit(1~2Bit)。一位数据所占的时间称为Baud Rate（波特率）。对于大多数的mcu来讲，数据为的长度、数据校验方式（奇校验、偶校验或无校验）、停止位（Stop Bit）的长度及Baud Rate是可以通过程序编程进行灵活设定。此类接口最常用的方式就是与PC机的串口进行数据通讯。
** I2C接口：I2C是由Philips开发的一种数据传输协议，同样采用2根信号来实现：SDAT（串行数据输入输出）和SCLK（串行时钟）。其最大的好处是可以在此总线上挂接多个设备，通过地址来进行识别和访问；I2C总线的一个最大的好处就是非常方便用软件通过IO口来实现，其传输的数据速率完全由SCLK来控制，可快可慢，不像UART接口，有严格的速率要求。
* Watchdog（看门狗定时器）：Watchdog也是绝大多数mcu的一种基本配置（一些4位mcu可能没有此功能），大多数的mcu的Watchdog只能允许程序对其进行复位而不能对其关闭（有的是在程序烧入时来设定的，如Microchip PIC系列mcu），而有的mcu则是通过特定的方式来决定其是否打开，如Samsung的KS57系列，只要程序访问了Watchdog寄存器，就自动开启且不能再被关闭。一般而言watchdog的复位时间是可以程序来设定的。Watchdog的最基本的应用是为mcu因为意外的故障而导致死机提供了一种自我恢复的能力。
mcu程序的编写：
mcu的程序的编写与PC下的程序的编写存在很大的区别，虽然现在基于C的mcu开发工具越来越流行，但对于一个高效的程序代码和喜欢使用汇编的设计者来讲，汇编语言仍然是最简洁、最有效的编程语言。对于mcu的程序编写，其基本的框架可以说是大体一致的，一般分为初始化部分（这是mcu程序设计与PC最大的不同），主程序循环体和中断处理程序三大部分（见图1 a 和 b），其分别说明如下：
* 初始化：对于所有的mcu程序的设计来讲，出世化是最基本也是最重要的一步，一般包括如下内容：
** 屏蔽所有中断并初始化堆栈指针：初始化部分一般不希望有任何中断发生；
** 清除系统的RAM区域和显示Memory：虽然有时可能没有完全的必要，但从可靠性及一致性的角度出发，特别是对于防止意外的错误，还是建议养成良好的编程习惯；
** IO口的初始化：根据项目的应用的要求，设定相关IO口的输入输出方式，对与输入口，需要设定其上拉或下拉电阻；对于输出口，则必须设定其出世的电平输出，以防出现不必要的错误；
** 中断的设置：对于所有项目需要用到的中断源，应该给予开启并设定中断的触发条件，而对于不使用的多余的中断，则必须给予关闭；
** 其他功能模块的初始化：对于所有需要用到的mcu的外围功能模块，必须按项目的应用的要求进行相应的设置，如UART的通讯，需要设定Baud Rate，数据长度，校验方式和Stop Bit的长度等，而对于Programmer Timer，则必须设置其时钟源，分频数及Reload Data等；
** 参数的出世化：完成了mcu的硬件和资源的出世化后，接下来就是对程序中使用到的一些变量和数据的初始化设置，这一部分的初始化需要根据具体的项目及程序的总体安排来设计。对于一些用EEPROM来保存项目预制数的应用来讲，建议在初始化时将相关的数据拷贝到mcu的RAM，以提高程序对数据的访问速度，同时降低系统的功耗（原则上，访问外部EEPROM都会增加电源的功耗）。
* 主程序循环体：大多数mcu是属于长时间不间断运行的，因此其主程序体基本上都是以循环的方式来设计，对于存在多种工作模式的应用来讲，则可能存在多个循环体，相互之间通过状态标志来进行转换。对于主程序体，一般情况下主要安排如下的模块：
** 计算程序：计算程序一般比较耗时，因此坚决反对放在任何中断中处理，特别是乘除法运算；
** 实时性要求不高或没有实时性要求的处理程序；
** 显示传输程序：主要针对存在外部LED、LCD Driver的应用；
* 中断处理程序：中断程序主要用于处理实时性要求较高的任务和事件，如，外部突发性信号的检测，按键的检测和处理，定时计数，LED显示扫描等。一般情况下，中断程序应尽可能保证代码的简洁和短小，对于不需要实时去处理的功能，可以在中断中设置触发的标志，然后由主程序来执行具体的事务——这一点非常重要，特别是对于低功耗、低速的mcu来讲，必须保证所有中断的及时响应。
* 对于不同任务体的安排，不同的mcu其处理的方法也有所不同。例如，对于低速、低功耗的mcu（Fosc＝32768Hz）应用，考虑到此类项目均为手持式设备和采用普通的LCD显示，对按键的反应和显示的反应要求实时性较高，应此一般采用定时中断的方式来处理按键的动作和数据的显示；而对于高速的mcu，如Fosc>1MHz的应用，由于此时mcu有足够的时间来执行主程序循环体，因此可以只在相应的中断中设置各种触发标志，并将所有的任务放在主程序体中来执行；
* 在mcu的程序设计中，还需要特别注意的一点就是：要防止在中断和主程序体中同时访问或设置同一个变量或数据的情况。有效的预防方法是，将此类数据的处理安排在一个模块中，通过判断触发标志来决定是否执行该数据的相关操作；而在其他的程序体中（主要是中断），对需要进行该数据的处理的地方只设置触发的标志。——这可以保证数据的执行是可预知和唯一的。
总之，对于mcu开发来讲，必须记住一点：“条条大路通罗马”，没有做不到的事，关键是看方法是否正确！再就是多做多动手和多想。

定时器使用(多使用熟悉 替代软件定时)
1.设置工作模式
TMOD = ;
2.THn/TLn赋初值
TH = ；
TL = ；
3.用定时器0还是1
TR0/1 = 1;
4.清0置1 开中断

---------------------------------------------------------------
流水灯
unsigned int i = 0;//用于软件延时
unsigned char cnt = 0;//移位控制小灯亮灭

while(1)
{
	P0 = ~(0x01<<cnt);//P0等于1左移cnt位,控制8个led
	for(i=0;i<20000;i++);//软件延时
	cnt++;
	if(cnt>=8)
	{
		cnt = 0;
	}
}

---------------------------------------------------------------
8.30
故事贴-我把单片机玩死了
第一步先去做需求分析，知道自己负责的项目在市场上有没有空间，该如何定位，技术指标如何确定，原理框图如何绘制
凡是和波形发生器相关的内容，都下载下来，然后共享。相关的厂家、型号、技术指标、设计方案、参照代码、市场分析等等等等
DDS、频率范围、单极性波形、双极性波形、调节精度、输出波形峰值等等

示波器有什么作用 https://zhidao.baidu.com/question/372750396.html

做个51最小系统->示波器->AD验证

------------------------------------
51单片机基础内容
内部电路 外部电路  单片机上的常用资源你都熟练掌握了  自己焊接最小系统  电源芯片http://tieba.baidu.com/p/4806854830
汇编语言熟悉单片机的基本功能
flash区擦写次数有限制

第一，买板子，按照配套视频学
第二，看单片机入门的课本。
第三，一般前两步认真学完的，到了第三步自己就能意识到该学什么了。数电、模电、C语言。
前两步里面数电、模电、C语言都会讲，但是是个实操的过程，让你意识到这些东西是如何联系起来工作的。到了第三步，开始着重学习。
第四，原理图、PCB的绘制


这四步走完，基本可以入门了
---------------
51单片机重点内容
单片机市场、类型、编程语言、画图经验、应聘技巧等等

51单片机拓展内容
原理图设计 仿真(程序 外设)

概念区分
mcu ic soc等区别 
IC = integrate circuit（集成电路）
ASIC = Application Specific Integrated Circuit（专用集成电路）
SOC = systerm on chip（系统芯片）
从英文定义我们能够看出：ASIC和SOC都是IC的一类，IC是总称。
SOC 系统芯片，顾名思义，完成的是一个系统的功能，那么一个系统会包含哪些呢，一般会有：mcu（控制），memory（sram，opt，eprrom flash不一定都有），模拟和数字的接口（ADC，DAC），及其他的人机接口外设备（如usb，spi，i2c，SD卡接口等），那么我的定义是：包含了mcu和memory，至少包含ADC,DAC的一种，我们称这种集成电路为SOC。
那么什么为ASIC，及mcu，memory，ADC(DAC)缺其一或都不包含的（比如图形压缩芯片）为ASIC

MCU，即微控制器，是以前的一种做法，类似于单片机，只是集成了一些更多的功能模块，它本质上仍是一个完整的单片机，有处理器，有各种接口，所有的开发都是基于已经存在的系统架构，应用者要做的就是开发软件程序和加外部设备。
SOC，是个整体的设计方法概念，它指的是一种芯片设计方法，集成了各种功能模块，每一种功能都是由硬件描述语言设计程序，然后在SOC内由电路实现的；每一个模块不是一个已经设计成熟的ASIC“器件”，只是利用芯片的一部分资源去实现某种传统的功能。这种功能是没有限定的，可以是存储器，当然也可以是处理器，如果这片SOC的系统目标就是处理器，那么做成的SOC就是一个MCU；如果要做的是一个完整的带有处理器的系统，那么MCU就是整个SOC中的一个模块，一个IP。SOC可以做成批量生产的通用器件，如MCU；也可以针对某一对象专门设计，可以集成任何功能，不像MCU那样有自身架构的限定。它的体积可以很少，特殊设计的芯片可以根据需要减少体积、降低功耗，在比较大的范围内不受硬件架构的限制（当然，它也是会受芯片自身物理结构的限制，如晶圆类型、大小等）。
SOC的一大特点就是其在仿真时可以连同硬件环境一起仿真，仿真工具不只支持对软件程序的编译调试，同时也支持对硬件架构的编译调试，如果不满意硬件架构设计，想要加一个存储器，或是减少一个接口都可以通过程序直接更改，这一点，MCU的设计方法是无法实现的，MCU的方法中，硬件架构是固定的，是不可更改的，多了只能浪费，少了也只能在软件上想办法或是再加，存储空间不够可以再加，如果是接口不够则只能在软件上想办法复用。仿真之后可以通过将软、硬件程序下载到FPGA上进行实际硬件调试，以便更真实地进行器件测试。
如果硬件调试成功后直接投片生产成“固定结构的芯片”，则其为普通的SOC；如果其硬件就是基于FPGA的，也就是说它是“用FPGA做为最终实现” 的，它在以后也可以随时进行硬件升级与调试的，我们就叫它为SOPC的设计方法，所以说SOPC是SOC的一种解决方案。
SOPC设计灵活、高效，且具有成品的硬件可重构特性（SOC在调试过程中也可硬件重构），它的适用性可以很广，针对不同的对象，它可以进行实时的结构调整，如减少程序存储空间、增加接口数目等，这一附加价值是任何固定结构IC所无法具备的，但它的价格可能会比批量生产的固定结构IC要贵得多！

芯片手册 
如何选择芯片(性能选型) 

做简单的项目-常用的功能 例如哪些日常(或者火热电子产品)电子设备用到单片机-玩具/家居等

相关教程:郭天祥单片机视频教程

学习总结
8.25
PL2303接TTL无法烧写-无法找到单片机
解决办法:把TXD跟RXD交换一下  换后接线为:绿色接单片机上的RX


mcu
任何一款mcu，其基本原理和功能都是大同小异，所不同的只是其外围功能模块的配置及数量、指令系统等。对于指令系统，虽然形式上看似千差万别，但实际上只是符号的不同，其所代表的含义、所要完成的功能和寻址方式基本上是类似的。因此，对于任何一款mcu，主要应从如下的几个方面来理解和掌握：
* mcu的特点：要了解一款mcu，首先需要知道就是其ROM空间、RAM空间、IO口数量、定时器数量和定时方式、所提供的外围功能模块（Peripheral Circuit）、中断源、工作电压及功耗等等。
* 了解这些mcu Features后，接下来第一步就是将所选mcu的功能与实际项目开发的要求的功能进行对比，明确那些资源是目前所需要的，那些是本项目所用不到的。对于项目中需要用到的而所选mcu不提供的功能，则需要认真理解mcu的相关资料，以求用间接的方法来实现，例如，所开发的项目需要与PC机COM口进行通讯，而所选的mcu不提供UART口，则可以考虑用外部中断的方式来实现；
* 对于项目开发需要用到的资源，则需要对其Manua*进行认真的理解和阅读，而对于不需要的功能模块则可以忽略或浏览即可。对于mcu学习来讲，应用才是关键，也是最主要的目的。
* 明确了mcu的相关功能后，接下来就可以开始编程了。对于初学者或初次使用此款mcu的设计者来说，可能会遇到很多对mcu的功能描述不明确的地方，对于此类问题，可以通过两种方法来解决，一种是编写特别的验证程序来理解资料所述的功能；另一种则可以暂时忽略，程序设计中则按照自己目前的理解来编写，留到调试时去修改和完善。前一种方法适用于时间较宽松的项目和初学者，而后一种方法则适合于具有一定mcu开发经验的人或项目进度较紧迫的情况；
* 指令系统千万不要特别花时间去理解。指令系统只是一种逻辑描述的符号，只有在编程时根据自己的逻辑和程序的逻辑要求来查看相关的指令即可，而且随着编程的进行，对指令系统也会越来越熟练，甚至可以不自觉地记忆下来；
mcu的基本功能：
对于绝大多数mcu，下列功能是最普遍也是最基本的，针对不同的mcu，其描述的方式可能会有区别，但本质上是基本相同的：
* Timer（定时器）：Timer的种类虽然比较多，但可归纳为两大类：一类是固定时间间隔的Timer，即其定时的时间是由系统设定的，用户程序不可控制，系统只提供几种固定的时间间隔给用户程序进行选择，如32Hz，16Hz，8Hz等，此类Timer在4位mcu中比较常见，因此可以用来实现时钟、计时等相关的功能；另一类则是Programmable Timer（可编程定时器），顾名思义，该类Timer的定时时间是可以由用户的程序来控制的，控制的方式包括：时钟源的选择、分频数（Prescale）选择及预制数的设定等，有的mcu三者都同时具备，而有的则可能是其中的一种或两种。此类Timer应用非常灵活，实际的使用也千变万化，其中最常见的一种应用就是用其实现PWM输出（具体的应用，后续会有特别的介绍）。由于时钟源可以自由选择，因此，此类Timer一般均与Event Counter（事件计数器）合在一起；
* IO口：任何mcu都具有一定数量的IO口，没有IO口，mcu就失去了与外部沟通的渠道。根据IO口的可配置情况，可以分为如下几种类型：
** 纯输入或纯输出口：此类IO口有mcu硬件设计决定，只能是输入或输出，不可用软件来进行实时的设定；
** 直接读写IO口：如MCS-51的IO口就属于此类IO口。当执行读IO口指令时，就是输入口；当执行写IO口指令则自动为输出口；
** 程序编程设定输入输出方向的：此类IO口的输入或输出由程序根据实际的需要来进行设定，应用比较灵活，可以实现一些总线级的应用，如I2C总线，各种LCD、LED Driver的控制总线等；
** 对于IO口的使用，重要的一点必须牢记的是：对于输入口，必须有明确的电平信号，确保不能浮空（可以通过增加上拉或下拉电阻来实现）；而对于输出口，其输出的状态电平必须考虑其外部的连接情况，应保证在Standby或静态状态下不存在拉电流或灌电流。
* 外部中断：外部中断也是绝大多数mcu所具有的基本功能，一般用于信号的实时触发，数据采样和状态的检测，中断的方式由上升沿、下降沿触发和电平触发几种。外部中断一般通过输入口来实现，若为IO口，则只有设为输入时其中断功能才会开启；若为输出口，则外部中断功能将自动关闭（ATMEL的ATiny系列存在一些例外，输出口时也能触发中断功能）。外部中断的应用如下：
** 外部触发信号的检测：一种是基于实时性的要求，比如可控硅的控制，突发性信号的检测等；而另一种情况则是省电的需要；
** 信号频率的测量；为了保证信号不被遗漏，外部中断是最理想的选择；
** 数据的解码：在遥控应用领域，为了降低设计的成本，经常需要采用软件的方式来对各种编码数据进行解码，如Manchester和PWM编码的解码；
** 按键的检测和系统的唤醒：对于进入Sleep状态的mcu，一般需要通过外部中断来进行唤醒，最基本的形式则是按键，通过按键的动作来产生电平的变化；
* 通讯接口：mcu所提供的通讯接口一般包括SPI接口，UART，I2C接口等，其分别描述如下：
** SPI接口：此类接口是绝大多数mcu都提供的一种最基本通讯方式，其数据传输采用同步时钟来控制，信号包括：SDI（串行数据输入）、SDO（串行数据输出）、SCLK（串行时钟）及Ready信号；有些情况下则可能没有Ready信号；此类接口可以工作在Master方式或Slave方式下，通俗说法就是看谁提供时钟信号，提供时钟的一方为Master，相反的一方则为Slaver；
** UART（Universal Asynchronous Receive Transmit）：属于最基本的一种异步传输接口，其信号线只有Rx和Tx两条，基本的数据格式为：Start Bit + Data Bit(7-bits/8-bits) + Parity Bit(Even, Odd or None) + Stop Bit(1~2Bit)。一位数据所占的时间称为Baud Rate（波特率）。对于大多数的mcu来讲，数据为的长度、数据校验方式（奇校验、偶校验或无校验）、停止位（Stop Bit）的长度及Baud Rate是可以通过程序编程进行灵活设定。此类接口最常用的方式就是与PC机的串口进行数据通讯。
** I2C接口：I2C是由Philips开发的一种数据传输协议，同样采用2根信号来实现：SDAT（串行数据输入输出）和SCLK（串行时钟）。其最大的好处是可以在此总线上挂接多个设备，通过地址来进行识别和访问；I2C总线的一个最大的好处就是非常方便用软件通过IO口来实现，其传输的数据速率完全由SCLK来控制，可快可慢，不像UART接口，有严格的速率要求。
* Watchdog（看门狗定时器）：Watchdog也是绝大多数mcu的一种基本配置（一些4位mcu可能没有此功能），大多数的mcu的Watchdog只能允许程序对其进行复位而不能对其关闭（有的是在程序烧入时来设定的，如Microchip PIC系列mcu），而有的mcu则是通过特定的方式来决定其是否打开，如Samsung的KS57系列，只要程序访问了Watchdog寄存器，就自动开启且不能再被关闭。一般而言watchdog的复位时间是可以程序来设定的。Watchdog的最基本的应用是为mcu因为意外的故障而导致死机提供了一种自我恢复的能力。
mcu程序的编写：
mcu的程序的编写与PC下的程序的编写存在很大的区别，虽然现在基于C的mcu开发工具越来越流行，但对于一个高效的程序代码和喜欢使用汇编的设计者来讲，汇编语言仍然是最简洁、最有效的编程语言。对于mcu的程序编写，其基本的框架可以说是大体一致的，一般分为初始化部分（这是mcu程序设计与PC最大的不同），主程序循环体和中断处理程序三大部分（见图1 a 和 b），其分别说明如下：
* 初始化：对于所有的mcu程序的设计来讲，出世化是最基本也是最重要的一步，一般包括如下内容：
** 屏蔽所有中断并初始化堆栈指针：初始化部分一般不希望有任何中断发生；
** 清除系统的RAM区域和显示Memory：虽然有时可能没有完全的必要，但从可靠性及一致性的角度出发，特别是对于防止意外的错误，还是建议养成良好的编程习惯；
** IO口的初始化：根据项目的应用的要求，设定相关IO口的输入输出方式，对与输入口，需要设定其上拉或下拉电阻；对于输出口，则必须设定其出世的电平输出，以防出现不必要的错误；
** 中断的设置：对于所有项目需要用到的中断源，应该给予开启并设定中断的触发条件，而对于不使用的多余的中断，则必须给予关闭；
** 其他功能模块的初始化：对于所有需要用到的mcu的外围功能模块，必须按项目的应用的要求进行相应的设置，如UART的通讯，需要设定Baud Rate，数据长度，校验方式和Stop Bit的长度等，而对于Programmer Timer，则必须设置其时钟源，分频数及Reload Data等；
** 参数的出世化：完成了mcu的硬件和资源的出世化后，接下来就是对程序中使用到的一些变量和数据的初始化设置，这一部分的初始化需要根据具体的项目及程序的总体安排来设计。对于一些用EEPROM来保存项目预制数的应用来讲，建议在初始化时将相关的数据拷贝到mcu的RAM，以提高程序对数据的访问速度，同时降低系统的功耗（原则上，访问外部EEPROM都会增加电源的功耗）。
* 主程序循环体：大多数mcu是属于长时间不间断运行的，因此其主程序体基本上都是以循环的方式来设计，对于存在多种工作模式的应用来讲，则可能存在多个循环体，相互之间通过状态标志来进行转换。对于主程序体，一般情况下主要安排如下的模块：
** 计算程序：计算程序一般比较耗时，因此坚决反对放在任何中断中处理，特别是乘除法运算；
** 实时性要求不高或没有实时性要求的处理程序；
** 显示传输程序：主要针对存在外部LED、LCD Driver的应用；
* 中断处理程序：中断程序主要用于处理实时性要求较高的任务和事件，如，外部突发性信号的检测，按键的检测和处理，定时计数，LED显示扫描等。一般情况下，中断程序应尽可能保证代码的简洁和短小，对于不需要实时去处理的功能，可以在中断中设置触发的标志，然后由主程序来执行具体的事务——这一点非常重要，特别是对于低功耗、低速的mcu来讲，必须保证所有中断的及时响应。
* 对于不同任务体的安排，不同的mcu其处理的方法也有所不同。例如，对于低速、低功耗的mcu（Fosc＝32768Hz）应用，考虑到此类项目均为手持式设备和采用普通的LCD显示，对按键的反应和显示的反应要求实时性较高，应此一般采用定时中断的方式来处理按键的动作和数据的显示；而对于高速的mcu，如Fosc>1MHz的应用，由于此时mcu有足够的时间来执行主程序循环体，因此可以只在相应的中断中设置各种触发标志，并将所有的任务放在主程序体中来执行；
* 在mcu的程序设计中，还需要特别注意的一点就是：要防止在中断和主程序体中同时访问或设置同一个变量或数据的情况。有效的预防方法是，将此类数据的处理安排在一个模块中，通过判断触发标志来决定是否执行该数据的相关操作；而在其他的程序体中（主要是中断），对需要进行该数据的处理的地方只设置触发的标志。——这可以保证数据的执行是可预知和唯一的。
总之，对于mcu开发来讲，必须记住一点：“条条大路通罗马”，没有做不到的事，关键是看方法是否正确！再就是多做多动手和多想。

### pic
PIC比51多个配置位
然后，PIC的端口要配置成输入或者输出，51不用。PIC的中断没有优先级，需要软件判断。
最后，PIC比51多许多寄存器，你要使用PIC的各种功能，都需要去初始化寄存器。
再说说PIC的优点。
一：相同的晶振情况下，PIC比51速度快，PIC4个时钟周期为一个指令周期，51是12个。
二：PIC比51功能强大许多，比如自带AD转换，自带PWM，内置弱上拉（需设置）LCD接口等。。这样，你在用到许多功能的时候就很方便啦，不用去接很多外围电路。
三：PIC的驱动能力比51强，PIC可直接驱动数码管，51有些吃力哦。
四：PIC的抗干扰能力比51好，
